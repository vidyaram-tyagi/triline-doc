"use strict";(globalThis.webpackChunkmy_website=globalThis.webpackChunkmy_website||[]).push([[4820],{6511(e,n,t){t.r(n),t.d(n,{assets:()=>a,contentTitle:()=>d,default:()=>h,frontMatter:()=>c,metadata:()=>s,toc:()=>l});const s=JSON.parse('{"id":"qa-process/advantage_of_phpstan","title":"Advantage of PHPStan!","description":"\ud83e\udde9 Framework vs. PHPStan \u2014 Real Difference","source":"@site/docs/qa-process/advantage_of_phpstan.md","sourceDirName":"qa-process","slug":"/qa-process/advantage_of_phpstan","permalink":"/triline-doc/docs/qa-process/advantage_of_phpstan","draft":false,"unlisted":false,"editUrl":"https://github.com/vidyaram-tyagi/triline-doc/tree/main/docs/qa-process/advantage_of_phpstan.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"qaprocessSidebar","previous":{"title":"PHPStan Introduction!","permalink":"/triline-doc/docs/qa-process/php-stan"},"next":{"title":"psr","permalink":"/triline-doc/docs/qa-process/psr"}}');var i=t(4848),r=t(8453);const c={sidebar_position:1},d="Advantage of PHPStan!",a={},l=[{value:"\ud83e\udde9 Framework vs. PHPStan \u2014 Real Difference",id:"-framework-vs-phpstan--real-difference",level:2},{value:"\ud83e\udde0 Example 1: Invalid Config \u2014 When It\u2019s Actually Detected",id:"-example-1-invalid-config--when-its-actually-detected",level:2}];function o(e){const n={code:"code",h1:"h1",h2:"h2",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"advantage-of-phpstan",children:"Advantage of PHPStan!"})}),"\n",(0,i.jsx)(n.h2,{id:"-framework-vs-phpstan--real-difference",children:"\ud83e\udde9 Framework vs. PHPStan \u2014 Real Difference"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"\ud83d\udd0d Check Type"}),(0,i.jsx)(n.th,{children:"Yii2 (Runtime)"}),(0,i.jsx)(n.th,{children:"PHPStan (Static Analysis)"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"When it runs"})}),(0,i.jsx)(n.td,{children:"Only when the code is executed (runtime)."}),(0,i.jsx)(n.td,{children:"Before running the app \u2014 at analysis time."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Scope"})}),(0,i.jsx)(n.td,{children:"Only the executed path."}),(0,i.jsx)(n.td,{children:"Entire codebase \u2014 even unused or rarely run paths."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Performance impact"})}),(0,i.jsx)(n.td,{children:"Happens while app is booting or handling requests."}),(0,i.jsx)(n.td,{children:"Zero runtime cost \u2014 analysis only."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Error type visibility"})}),(0,i.jsx)(n.td,{children:"Might throw an exception only in production if missed in testing."}),(0,i.jsx)(n.td,{children:"Shown early during development or CI."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Confidence level"})}),(0,i.jsx)(n.td,{children:"Depends on whether the code runs."}),(0,i.jsx)(n.td,{children:"Guaranteed, since all PHP files are scanned."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Config validation"})}),(0,i.jsx)(n.td,{children:"Only checked when Yii loads that config section."}),(0,i.jsx)(n.td,{children:"Scans every config file even if not loaded."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Model property checks"})}),(0,i.jsx)(n.td,{children:"Yii catches \u201cundefined property\u201d only when that line executes."}),(0,i.jsx)(n.td,{children:"PHPStan detects every such usage across the project before execution."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Custom business rules"})}),(0,i.jsx)(n.td,{children:"Needs manual enforcement/review."}),(0,i.jsx)(n.td,{children:"Can be automatically enforced (via PHPStan custom rules)."})]})]})]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"-example-1-invalid-config--when-its-actually-detected",children:"\ud83e\udde0 Example 1: Invalid Config \u2014 When It\u2019s Actually Detected"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-php",children:"// config/web.php\n'components' => [\n    'cache' => [\n        'class' => 'yii\\cach\\FileCache', // typo\n    ],\n];\n"})}),"\n",(0,i.jsx)(n.p,{children:"\ud83e\udde0 Yii2:\nWill throw an exception only when this component is accessed:"}),"\n",(0,i.jsx)(n.p,{children:"Yii::$app->cache->get('key');"}),"\n",(0,i.jsx)(n.p,{children:"If that code path never runs in dev/test, you won\u2019t see the error until production."}),"\n",(0,i.jsx)(n.p,{children:"PHPStan:\nFlags it during analysis:"}),"\n",(0,i.jsx)(n.p,{children:"Class yii\\cach\\FileCache not found (line 4 of config/web.php)"}),"\n",(0,i.jsx)(n.p,{children:"\u2705 You catch the problem before deploying, not at runtime."}),"\n",(0,i.jsx)(n.p,{children:"\ud83e\udde0 Example 2: Model Property"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"$user = User::findOne(1);\necho $user->emial; // typo\n"})}),"\n",(0,i.jsx)(n.p,{children:"\ud83e\udde0 Yii2:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Undefined property: app\\models\\User::$emial\n\u27a4 Only appears when that code executes.\n"})}),"\n",(0,i.jsx)(n.p,{children:"PHPStan:\nDetects it even if that line is in a branch that never runs,\nor in a view file, or inside a unit test you forgot to run."}),"\n",(0,i.jsx)(n.p,{children:"\u2705 PHPStan gives you project-wide coverage, not just runtime coverage."}),"\n",(0,i.jsx)(n.p,{children:"\ud83e\udde0 Example 3: Unused / Dead Code"}),"\n",(0,i.jsx)(n.p,{children:"Yii2 doesn\u2019t care if you have old unused methods, variables, or controllers."}),"\n",(0,i.jsx)(n.p,{children:"PHPStan will highlight dead code, unused imports, and unreachable return statements."}),"\n",(0,i.jsx)(n.p,{children:"\u2705 This is maintainability, not just correctness."}),"\n",(0,i.jsx)(n.p,{children:"\ud83e\udde0 Example 4: Future Compatibility"}),"\n",(0,i.jsx)(n.p,{children:"When PHP or Yii upgrades, PHPStan (especially with strict/deprecation rules) tells you:"}),"\n",(0,i.jsx)(n.p,{children:"Deprecated: Method \\yii\\db\\ActiveRecord::getAttribute() will change return type in future version."}),"\n",(0,i.jsx)(n.p,{children:"Yii2 itself won\u2019t warn you \u2014 it\u2019ll break later when you upgrade."}),"\n",(0,i.jsx)(n.p,{children:"\u2705 PHPStan acts like a compatibility radar."}),"\n",(0,i.jsx)(n.p,{children:"\ud83e\udde0 Example 5: Consistency Rules (Beyond Yii2)"}),"\n",(0,i.jsx)(n.p,{children:"You can enforce your team\u2019s policies:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Controllers can\u2019t access models directly."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"All services must have @return annotations."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"All exceptions must extend BaseException."}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Yii2 doesn\u2019t do any of this \u2014 PHPStan does."})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(o,{...e})}):o(e)}},8453(e,n,t){t.d(n,{R:()=>c,x:()=>d});var s=t(6540);const i={},r=s.createContext(i);function c(e){const n=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:c(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);